{% extends "base.html" %}

{% block title %}
{% if title %}
<title>{{ title }} - Blog</title>
{% else %}
<title>Welcome to Blog!</title>
{% endif %}
{% endblock %}

{% block style %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/ranking-page.css') }}" />
{% endblock %}


{% block main %}
<div class="bg-light cv">
  <header class="text-center bg-white p-4 shadow-sm">
      <h1 class="danger-text py-5">Ranking</h1>
  </header>

  <div class="container mt-5">
      <div class="row clearfix">
          <!-- ranking-list -->
          <div class="col-md-6 offset-md-3 column">
              <section class="p-4 mb-4 bg-white rounded shadow-sm box box-odd">
                  <ul class="list-group list-group-flush">
                    {% for user in users %}
                    <li class="list-group-item mt-2 mb-3">
                      <!-- beginning -->
                      <div class="col-md-10 offset-md-1 column row clearfix list-margin border-0">
                          <div class="col-md-1 column">
                            <span class="text-secondary badge rounded-pill bg-warning">{{ loop.index }}</span>
                          </div>
                          <div class="col-md-2 column">
                            <!-- Image link points to the personal profile page -->
                            <img alt="Profile Picture" src= "{{ user.robohash_url }}" class="rounded-circle" style="height: 55px; width: 55px;"/>
                          </div>
                          <div class="col-md-9 column">
                              <h4>{{ user.username }}</h4>
                              {% if user.bio %}
                              <p class="text-muted">&nbsp;"{{ user.bio }}"</p>
                              {% else %}
                              <!-- <p class="text-muted">&nbsp;This user has not provided a bio yet...</p> -->
                              {% endif %}
                              <ul class="list-inline">
                                <li class="text-secondary list-inline-item text-center mt-2">
                                  <i class="bi bi-award"></i>
                                  <p>{{ user.credit }} credits</p>
                                </li>
                                <li class="text-secondary list-inline-item text-center">
                                  <i class="bi bi-pencil-square"></i>
                                  <p>{{ user.posts|length }} posts</p>
                                </li>
                                <li class="text-secondary list-inline-item text-center">
                                  <i class="bi bi-chat-right-text"></i>
                                  <p>{{ user.comments.all()|length }} comments</p>
                                </li>
                                <!-- <li class="text-secondary list-inline-item">
                                  {# user.likes #} likes
                                </li>
                                <li class="text-secondary list-inline-item">
                                  {# user.collections #} collections
                                </li> -->
                              </ul>
                          </div>
                        </div>
                    </li>
                    {% endfor %}
                  </ul>
              </section>
          </div>
      </div>
  </div>
</div>
{% endblock %}